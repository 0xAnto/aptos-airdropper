import{a as g,f as d,g as I,i as C,j as w,n as b}from"./chunk-EOFJFE4T.mjs";import{a as P}from"./chunk-QTRYMRYK.mjs";import{c as f,m as s}from"./chunk-DMKUAQB7.mjs";import{a as l}from"./chunk-IIPYR7PF.mjs";import{a as T}from"./chunk-IKYIJYBY.mjs";import{b as p}from"./chunk-IOSQVDZI.mjs";import{b as y}from"./chunk-QMURTXFM.mjs";import{a as r}from"./chunk-FS3NSGBF.mjs";import{b as A}from"./chunk-QIAHBEEW.mjs";async function S(n){let a=await x(n);return D(n,a)}async function x(n){let{aptosConfig:a,data:t}=n,e,o;return"bytecode"in t?o=await g(t):"multisigAddress"in t?(e={aptosConfig:a,multisigAddress:t.multisigAddress,function:t.function,functionArguments:t.functionArguments,typeArguments:t.typeArguments,abi:t.abi},o=await g(e)):(e={aptosConfig:a,function:t.function,functionArguments:t.functionArguments,typeArguments:t.typeArguments,abi:t.abi},o=await g(e)),o}async function D(n,a){let{aptosConfig:t,sender:e,options:o}=n,i;if(G(n)&&(i=p.ZERO.toString()),U(n)){let{secondarySignerAddresses:c}=n;return d({aptosConfig:t,sender:e,payload:a,options:o,secondarySignerAddresses:c,feePayerAddress:i})}return d({aptosConfig:t,sender:e,payload:a,options:o,feePayerAddress:i})}function G(n){return n.withFeePayer===!0}function U(n){return"secondarySignerAddresses"in n}function X(n){let{transaction:a}=n;return b(a)}function _(n){return C({...n})}async function Y(n){let{aptosConfig:a,transaction:t,signerPublicKey:e,secondarySignersPublicKeys:o,feePayerPublicKey:i,options:c}=n,u=I({transaction:t,signerPublicKey:e,secondarySignersPublicKeys:o,feePayerPublicKey:i,options:c}),{data:m}=await y({aptosConfig:a,body:u,path:"transactions/simulate",params:{estimate_gas_unit_price:n.options?.estimateGasUnitPrice??!1,estimate_max_gas_amount:n.options?.estimateMaxGasAmount??!1,estimate_prioritized_gas_unit_price:n.options?.estimatePrioritizedGasUnitPrice??!1},originMethod:"simulateTransaction",contentType:"application/x.aptos.signed_transaction+bcs"});return m}async function K(n){let{aptosConfig:a}=n,t=w({...n}),{data:e}=await y({aptosConfig:a,body:t,path:"transactions",originMethod:"submitTransaction",contentType:"application/x.aptos.signed_transaction+bcs"});return e}async function B(n){let{aptosConfig:a,signer:t,transaction:e}=n,o=_({signer:t,transaction:e});return K({aptosConfig:a,transaction:e,senderAuthenticator:o})}var M={typeParameters:[],parameters:[s.u8(),new s(s.u8())]};async function $(n){let{aptosConfig:a,account:t,metadataBytes:e,moduleBytecode:o,options:i}=n,c=o.map(u=>r.U8(u));return S({aptosConfig:a,sender:p.from(t),data:{function:"0x1::code::publish_package_txn",functionArguments:[r.U8(e),new r(c)],abi:M},options:i})}var N={typeParameters:[],parameters:[new f,s.u8(),new f,s.u8(),s.u8(),s.u8()]};async function nn(n){let{aptosConfig:a,fromAccount:t,toNewPrivateKey:e}=n,o=await l({aptosConfig:a,accountAddress:t.accountAddress}),i=T.fromPrivateKey({privateKey:e,legacy:!0}),u=new P({sequenceNumber:BigInt(o.sequence_number),originator:t.accountAddress,currentAuthKey:p.from(o.authentication_key),newPublicKey:i.publicKey}).bcsToBytes(),m=t.sign(u),R=i.sign(u),h=await S({aptosConfig:a,sender:t.accountAddress,data:{function:"0x1::account::rotate_authentication_key",functionArguments:[new A(t.signingScheme),r.U8(t.publicKey.toUint8Array()),new A(i.signingScheme),r.U8(i.publicKey.toUint8Array()),r.U8(m.toUint8Array()),r.U8(R.toUint8Array())],abi:N}});return B({aptosConfig:a,signer:t,transaction:h})}export{S as a,x as b,D as c,X as d,_ as e,Y as f,K as g,B as h,$ as i,nn as j};
//# sourceMappingURL=chunk-YFRXBEOC.mjs.map